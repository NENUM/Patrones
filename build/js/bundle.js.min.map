{"version":3,"sources":["app.js"],"names":["productosContainer","document","querySelector","buscarInput","buscarButton","getElementById","productos","carritoProductos","getProductos","axios","get","then","response","respuestaProductos","data","console","log","render","catch","error","productosRender","map","producto","imagen","nombre","descripcion","precio","join","innerHTML","agregarCarrito","contadorCarrito","querySelectorAll","forEach","p","i","addEventListener","Date","getHours","mostrarAlerta","method","url","id","unidad","agrupacion","cantidad","mostrarMensaje","mensaje","tipo","alerta","createElement","textContent","classList","add","appendChild","setTimeout","remove","aprobado","mensajeAprobado","buscarCoincidencia","setAttribute","value","onclick"],"mappings":"AAAA,IAAAA,mBAAAC,SAAAC,cAAA,cACAC,YAAAF,SAAAC,cAAA,gBACAE,aAAAH,SAAAI,eAAA,gBAEAC,UAAA,GACAC,iBAAA,GAGA,MAAAC,aAAA,KACAC,MAAAC,IAAA,0CACAC,KAAAC,IACA,MAAAC,EAAAD,EAAAE,KACAC,QAAAC,IAAA,yBAAAH,GACAP,UAAAO,EACAI,WAEAC,MAAAC,GAAAJ,QAAAI,MAAAA,KAIA,SAAAF,SACA,MAAAG,EAAAd,UAAAe,IAAAC,GACA,qIAEAA,EAAAC,+EACAD,EAAAE,yFACAF,EAAAG,kFACAH,EAAAI,iKAIAC,KAAA,IACA3B,mBAAA4B,UAAAR,EACAS,iBAxBApB,MAAAC,IAAA,0CACAC,KAAAC,IACA,MAAAC,EAAAD,EAAAE,KACAC,QAAAC,IAAA,yBAAAH,GACAP,UAAAO,EACAI,WAEAC,MAAAC,GAAAJ,QAAAI,MAAAA,IAoBA,IAAAW,gBAAA,EACA,SAAAD,iBACA5B,SAAA8B,iBAAA,iBACAC,SAAA,SAAAC,EAAAC,GACAD,EAAAE,iBAAA,QAAA,KACApB,QAAAC,IAAAV,UAAA4B,KACA,IAAAE,MAAAC,YAAA,GACAC,cAAA,qHAAA,UAEA7B,MAAA,CACA8B,OAAA,OACAC,IAAA,+CACA1B,KAAA,CACAQ,SAAA,CACAmB,GAAAnC,UAAA4B,GAAAO,GACAjB,OAAAlB,UAAA4B,GAAAV,OACAE,OAAApB,UAAA4B,GAAAR,OACAD,YAAAnB,UAAA4B,GAAAT,YACAF,OAAAjB,UAAA4B,GAAAX,OACAmB,OAAA,CACAD,GAAAnC,UAAA4B,GAAAQ,OAAAD,GACAC,OAAApC,UAAA4B,GAAAQ,OAAAA,QAEAC,WAAA,CACAF,GAAAnC,UAAA4B,GAAAQ,OAAAD,GACAE,WAAArC,UAAA4B,GAAAS,WAAAA,aAGAC,SAAA,KAGAC,eAAA,8BAAA,kBAMA,SAAAP,cAAAQ,EAAAC,GAIA,GADA9C,SAAAC,cAAA,WAEA,OAEA,MAAA8C,EAAA/C,SAAAgD,cAAA,OACAD,EAAAE,YAAAJ,EACAE,EAAAG,UAAAC,IAAA,UAEA,UAAAL,GACAC,EAAAG,UAAAC,IAAA,SAIAnD,SAAAC,cAAA,sBACAmD,YAAAL,GAGAM,WAAA,KACAN,EAAAO,UACA,KAGA,SAAAV,eAAAC,EAAAU,GAEA,GADAvD,SAAAC,cAAA,YAEA,OAEA,MAAAuD,EAAAxD,SAAAgD,cAAA,OACAQ,EAAAP,YAAAJ,EACAW,EAAAN,UAAAC,IAAA,WAEA,aAAAI,GACAC,EAAAN,UAAAC,IAAA,YAGAnD,SAAAC,cAAA,sBACAmD,YAAAI,GAGAH,WAAA,KACAG,EAAAF,UACA,KAGA,SAAAG,qBACAtD,aAAAuD,aAAA,OAAA,uBAAAxD,YAAAyD,OAGAxD,aAAAyD,QAAAH","file":"bundle.js","sourcesContent":["let productosContainer = document.querySelector('#productos');\r\nlet buscarInput = document.querySelector('#buscarInput');\r\nlet buscarButton = document.getElementById(\"buscarButton\");\r\n\r\nlet productos = []\r\nlet carritoProductos = []\r\n\r\n\r\nconst getProductos = () => {\r\n    axios.get('http://localhost:18090/api/v1/producto')\r\n    .then(response => {\r\n        const respuestaProductos = response.data;\r\n        console.log(`GET respuestaProductos`, respuestaProductos);\r\n        productos = respuestaProductos\r\n        render();\r\n    })\r\n     .catch(error => console.error(error));\r\n    };\r\ngetProductos();\r\n\r\nfunction render () {\r\n    const productosRender = productos.map((producto)=>{\r\n        return `<ul><div class=\"productosContainer\">\r\n        <div class=\"contenido-producto\">\r\n            <div class=\"imagenProducto\"><img src=\"${producto.imagen}\"></div>\r\n            <li class=\"nombreProducto\"><span>Nombre: </span>${producto.nombre}</li>\r\n            <li class\"descripcionProducto\"><span>Descripcion: </span><br>${producto.descripcion}</li>\r\n            <li class=\"precioProducto\"><span>Precio: </span>$${producto.precio}</li>\r\n            <button class=\"agregarCarro\" id=\"buttonCarrito\">Agregar <span class=\"icon-cart\"></span></button>\r\n        <div>\r\n        </div></ul>`\r\n    }).join(\"\")\r\n    productosContainer.innerHTML = productosRender\r\n    agregarCarrito()\r\n}\r\n\r\nlet contadorCarrito = 0;\r\nfunction agregarCarrito() {\r\n    const botonAgregar = document.querySelectorAll('.agregarCarro');\r\n    botonAgregar.forEach(function(p, i){\r\n        p.addEventListener('click', ()=>{\r\n            console.log(productos[i])\r\n            if (new Date().getHours()<=22) {\r\n                mostrarAlerta('Lo sentimos, no estamos en horario de atencion, nuestro horario de atencion es de Domingo a Domingo de 8 am a 9 pm', 'error')\r\n            }else{\r\n                axios({\r\n                    method: 'post',\r\n                    url: 'http://localhost:18090/api/v1/carritoCompras',\r\n                    data:{\r\n                        producto:{\r\n                        id:productos[i].id, \r\n                        nombre:productos[i].nombre,\r\n                        precio:productos[i].precio,\r\n                        descripcion:productos[i].descripcion,\r\n                        imagen:productos[i].imagen,\r\n                        unidad:{\r\n                            id:productos[i].unidad.id,\r\n                            unidad:productos[i].unidad.unidad\r\n                        },\r\n                        agrupacion:{\r\n                            id:productos[i].unidad.id,\r\n                            agrupacion:productos[i].agrupacion.agrupacion\r\n                        }                   \r\n                        },\r\n                        cantidad:1\r\n                    }\r\n                })\r\n                mostrarMensaje('Producto aÃ±adido al carrito','aprobado')\r\n            }\r\n        })\r\n    })\r\n}\r\n\r\nfunction mostrarAlerta (mensaje, tipo){\r\n\r\n    //Mostrar solo una alerta\r\n    const alertaPrevia = document.querySelector('.alerta');\r\n    if(alertaPrevia){\r\n        return;\r\n    }\r\n    const alerta = document.createElement('DIV');\r\n    alerta.textContent = mensaje;\r\n    alerta.classList.add('alerta')\r\n\r\n    if (tipo==='error') {\r\n        alerta.classList.add('error');\r\n    }\r\n\r\n    //Inyectar en el html\r\n    const formulario = document.querySelector('.contenedor-alerta');\r\n    formulario.appendChild(alerta);\r\n\r\n    //Eliminiar la alerta\r\n    setTimeout(()=>{\r\n         alerta.remove();\r\n    },3000);\r\n}\r\n\r\nfunction mostrarMensaje (mensaje, aprobado){\r\n    const mensajePrevio = document.querySelector('.mensaje');\r\n    if (mensajePrevio) {\r\n        return;\r\n    }\r\n    const mensajeAprobado = document.createElement('DIV');\r\n    mensajeAprobado.textContent=mensaje;\r\n    mensajeAprobado.classList.add('mensaje')\r\n\r\n    if (aprobado==='aprobado') {\r\n        mensajeAprobado.classList.add('aprobado')\r\n    }\r\n\r\n    const formulario = document.querySelector('.contenedor-alerta');\r\n    formulario.appendChild(mensajeAprobado);\r\n    \r\n    //Eliminiar la alerta\r\n    setTimeout(()=>{\r\n         mensajeAprobado.remove();\r\n    },3000);\r\n}\r\n\r\nfunction buscarCoincidencia(){\r\n    buscarButton.setAttribute(\"href\",`buscar.html?palabra=${buscarInput.value}`)\r\n}\r\n\r\nbuscarButton.onclick = buscarCoincidencia"]}